<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>blancas.eisen.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Eisen 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="blancas.eisen.clojure.html"><span>blancas.eisen.clojure</span></a></li><li class="current"><a href="blancas.eisen.core.html"><span>blancas.eisen.core</span></a></li><li><a href="blancas.eisen.parser.html"><span>blancas.eisen.parser</span></a></li><li><a href="blancas.eisen.trans.html"><span>blancas.eisen.trans</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="blancas.eisen.core.html#var-add-declaration"><span>add-declaration</span></a></li><li><a href="blancas.eisen.core.html#var-add-expression"><span>add-expression</span></a></li><li><a href="blancas.eisen.core.html#var-call"><span>call</span></a></li><li><a href="blancas.eisen.core.html#var-eisen"><span>eisen</span></a></li><li><a href="blancas.eisen.core.html#var-eisen*"><span>eisen*</span></a></li><li><a href="blancas.eisen.core.html#var-eisen-repl"><span>eisen-repl</span></a></li><li><a href="blancas.eisen.core.html#var-eisen%3D"><span>eisen=</span></a></li><li><a href="blancas.eisen.core.html#var-eisenf"><span>eisenf</span></a></li><li><a href="blancas.eisen.core.html#var-eisenf%3D"><span>eisenf=</span></a></li><li><a href="blancas.eisen.core.html#var-fetch"><span>fetch</span></a></li><li><a href="blancas.eisen.core.html#var-host-model"><span>host-model</span></a></li><li><a href="blancas.eisen.core.html#var-host-module"><span>host-module</span></a></li><li><a href="blancas.eisen.core.html#var-host-name"><span>host-name</span></a></li><li><a href="blancas.eisen.core.html#var-init-eisen"><span>init-eisen</span></a></li><li><a href="blancas.eisen.core.html#var-parse-eisen"><span>parse-eisen</span></a></li><li><a href="blancas.eisen.core.html#var-read-eisen"><span>read-eisen</span></a></li><li><a href="blancas.eisen.core.html#var-with-host-model"><span>with-host-model</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>blancas.eisen.core documentation</h2><pre class="doc">Main module of the Eisen translator.
</pre><div class="public" id="var-add-declaration"><h3>add-declaration</h3><div class="usage"><code>(add-declaration token parser trans &amp; words)</code></div><pre class="doc">Extends Eisen with the ability to parse and translate
a new type of top-level declaration. Parameters:

token   A keyword that identifies the translator.

parser  A Kern parser that produces an Eisen AST, which is a
        map with a :token field whose value is token (above).
        Any other fields collect data for the translator.

trans   A function that translates an AST to Clojure code
        using any data produced by the parser.

words   Any words to be reserved for this parser's syntax.</pre></div><div class="public" id="var-add-expression"><h3>add-expression</h3><div class="usage"><code>(add-expression token parser trans &amp; words)</code></div><pre class="doc">Extends Eisen with the ability to parse and translate
a new type of expression. Parameters:

token   A keyword that identifies the translator.

parser  A Kern parser that produces an Eisen AST, which is a
        map with a :token field whose value is token (above).
        Any other fields collect data for the translator.

trans   A function that translates an AST to Clojure code
        using any data produced by the parser.

words   Any words to be reserved for this parser's syntax.</pre></div><div class="public" id="var-call"><h3>call</h3><h4 class="macro">macro</h4><div class="usage"><code>(call name &amp; more)</code></div><pre class="doc">If the name has a value in the host model it gets called along
with any other supplied arguments.</pre></div><div class="public" id="var-eisen"><h3>eisen</h3><div class="usage"><code>(eisen text)</code><code>(eisen text source)</code></div><pre class="doc">Translates the supplied Eisen code into Clojure and evaluates
the resulting forms. If given an expression, it will evaluate it
and return the result in the :value field.

Returns a map with:
:ok     true on success; false otherwise
:value  if ok, the value of the last form
:decls  if ok, a vector of Clojure forms
:error  if not ok, the error or warning message</pre></div><div class="public" id="var-eisen*"><h3>eisen*</h3><div class="usage"><code>(eisen* text)</code><code>(eisen* text source)</code></div><pre class="doc">Parses the supplied Eisen code and prints the syntax tree. Any
errors are printed to stdout; intended for testing at the REPL.</pre></div><div class="public" id="var-eisen-repl"><h3>eisen-repl</h3><div class="usage"><code>(eisen-repl)</code><code>(eisen-repl nsp p1 p2 p3)</code></div><pre class="doc">Implements a simple Eisen REPL. Uses (read-eisen) to read code
until the user types the quit command (default //) followed by
Enter. It evaluates each block of code and prints the result.

If called with no arguments, it will default to printing the
current namespace, followed by : and using &gt; as a continuation
prompt; nsp tells whether to print the current namespace; p1 is
the initial prompt and p2 is the line-continuation prompt.

user=&gt; (eisen-repl)
user: 3 + 4 &lt;Enter&gt;
&gt; &lt;Enter&gt;
&gt;
user: //
&gt; &lt;Enter&gt;
user=&gt;</pre></div><div class="public" id="var-eisen%3D"><h3>eisen=</h3><div class="usage"><code>(eisen= text)</code><code>(eisen= text source)</code></div><pre class="doc">Runs the supplied Eisen code. It returns the :value field of the
resulting map, or it prints any error messages on failure.
Intended for evaluating expressions at the REPL.</pre></div><div class="public" id="var-eisenf"><h3>eisenf</h3><div class="usage"><code>(eisenf f)</code><code>(eisenf f en)</code></div><pre class="doc">Runs the code from an eisen file; takes an optional encoding value,
which defaults to UTF-8.</pre></div><div class="public" id="var-eisenf%3D"><h3>eisenf=</h3><div class="usage"><code>(eisenf= f)</code><code>(eisenf= f en)</code></div><pre class="doc">Parses the code from an eisen file and prints the syntax tree.
Takes an optional encoding value, which defaults to UTF-8.
Any errors are printed to stdout; intended for testing at the REPL.</pre></div><div class="public" id="var-fetch"><h3>fetch</h3><h4 class="macro">macro</h4><div class="usage"><code>(fetch k)</code></div><pre class="doc">Looks up a key in the model and returns its value.
A key must be an unquoted symbol.</pre></div><div class="public" id="var-host-model"><h3>host-model</h3><h4 class="macro">macro</h4><div class="usage"><code>(host-model &amp; args)</code></div><pre class="doc">Puts on or more key value pairs into the model. A key must be
an unquoted symbol; a value may be any Clojure object.</pre></div><div class="public" id="var-host-module"><h3>host-module</h3><h4 class="macro">macro</h4><div class="usage"><code>(host-module tgt &amp; args)</code></div><pre class="doc">Similar to (refer) but acts on the eisen.user namespace. It is
intended to simplify the host API by adding names in bulk.
It supports refer filters:

(host-module x.y.z)
(host-module x.y.z :exclude '(f2 f3))
(host-module x.y.z :only '(f2 f3))
(host-module x.y.z :rename {'f-1 'f1})</pre></div><div class="public" id="var-host-name"><h3>host-name</h3><h4 class="macro">macro</h4><div class="usage"><code>(host-name sym)</code><code>(host-name sym alias)</code></div><pre class="doc">Creates a reference from the eisen.user namespace to the
supplied symbol. The name is preserved unless an alias is
also given, which is useful for avoiding backquotes if it
contains characters not accepted in Eisen identifiers.</pre></div><div class="public" id="var-init-eisen"><h3>init-eisen</h3><div class="usage"><code>(init-eisen)</code></div><pre class="doc">Initializes the Eisen library. This is a convenience function that
a host program may omit or override with custom calls.

(1) It installs the following commands into the Eisen langauge:

    * asString
    * case
    * cond
    * doseq
    * dosync
    * for
    * io!
    * locking
    * loop
    * sync
    * when
    * whenFirst
    * while
    * withOpen
    * withString

(2) Installs the following imports, to be applied to any Eisen module
    so that common Clojure names are available automatically and with
    in idiomatic camel case instead of embedded dashes.

clojure.core
   assocIn
   dropWhile
   fileSeq
   getIn
   groupBy
   hashMap
   hashSet
   lazySeq
   lineSeq
   mergeWith
   notAny?
   notEmpty
   notEvery?
   partitionAll
   partitionBy
   prStr
   printStr
   printlnStr
   reFind
   reGroups
   reMatcher
   reMatches
   rePattern
   reSeq
   readLine
   refSet
   selectKeys
   sortBy
   sortedMap
   sortedMapBy
   sortedSet
   sortedSetBy
   splitAt
   splitWith
   takeLast
   takeNth
   takeWhile
   treeSeq
   updateIn
   xmlSeq

clojure.java.io
   file 
   reader
   writer
   inputStream
   outputStream

clojure.string
   blank? 
   join 
   split 
   trim
   splitLines

clojure.xml
   parse</pre></div><div class="public" id="var-parse-eisen"><h3>parse-eisen</h3><div class="usage"><code>(parse-eisen text)</code><code>(parse-eisen text source)</code></div><pre class="doc">Parses the supplied Eisen code; returns an abstract syntax tree (AST).
</pre></div><div class="public" id="var-read-eisen"><h3>read-eisen</h3><div class="usage"><code>(read-eisen nsp p1 p2 p3)</code></div><pre class="doc">Reads one or more lines of Eisen code; nsp tells whether to print
the current namespace; p1 is the initial prompt and p2 is the
line-continuation prompt; p3 is the command to quit reading.
A single new-line character ends the input.</pre></div><div class="public" id="var-with-host-model"><h3>with-host-model</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-host-model &amp; forms)</code></div><pre class="doc">Evaluates the body, binding the host model. Use this macro
when Eisen code will run in a thread other than the main one.</pre></div></div></body></html>